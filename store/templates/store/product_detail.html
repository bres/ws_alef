{% extends 'base.html' %}
{% block title %}
{{ product.name }}
{% endblock %}

{% load static %}

{% block content %}

<!-- <div class="w-full md:w-1/2 px-4 left-1/2 md:fixed  md:max-w-4xl md:pr-16 "> -->
<style>

.header-fixed {
  position: fixed;
  top: 200;
  width: 100%;
  -webkit-box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
  -moz-box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
  box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
}

.header-relative {
  position: relative;
  bottom:500;
  width: 100%;
   -webkit-box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
  -moz-box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
  box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);
}
</style>

<section class="py-20 mx-4 xl:mx-32"  >
<div class="flex flex-wrap -mx-4 mb-8">
    <div class="w-full md:w-1/2  px-4 mb-8 md:mb-0">
        <img class="aspect-w-1 mb-10 border border-gray-300" src="{% if single_product.images %}{{ single_product.images.url }}{% else %}
        {% static "img/no_image.png" %}{% endif %}" alt="">
        <div class="thumb flex flex-wrap -mx-2">
        {% for i in product_gallery  %}
        <div class="p-2">
        <a  class="block border border-gray-300" href="{{i.image.url}}">
        <img  class=" aspect-w-1 " src="{{ i.image.url}}" alt="Product Image">
        </a>
        </div>
        {% endfor %}     
        </div>
    </div>
    <div id="cart" class="w-full md:w-1/2 px-4 left-1/2 md:fixed  md:max-w-4xl md:pr-16 ">

        <div class="flex items-center w-full py-1 font-medium text-md text-black text-center tracking-wide mb-4">
        <a href="{% url 'home' %}" class="text-black">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
        </svg>
        </a>
        <span class="mx-4 text-gray-700 ">
        /
        </span>
        <a href="{% url 'store:product_list' %}" class="text-gray-700  hover:underline">
          Back 
         </a>
        </div>
      
        <form method="POST" action="{% url 'carts:add_cart' single_product.id  %}">
        {% csrf_token %}
        <div  class="mb-4 pb-4 border-b">
        <p class="mb-4 text-gray-900 text-lg capitalize">{{ single_product.product_name }}</p>
        <p class="inline-block mb-4 text-2xl  text-gray-900">
        <span>â‚¬{{ single_product.price }}</span>
        <!-- <span class="font-normal text-base text-gray-400 line-through">discount</span> -->
        </p>
        <p class="max-w-3xl text-gray-700">
          {{ single_product.description }}
        </p>
        </div>
        {% if single_product.stock <= 0 %}
        <small class="font-medium text-red-500 px-2 w-full lg:w-2/5 mb-4 lg:mb-0 capitalize">out of stock</small>
        {% else %}
        <div class="my-4 flex flex-col 2xl:flex-row w-full space-y-4 2xl:space-y-0 2xl:space-x-2 mb-4 pb-4 ">
          <select class="w-full block py-4 bg-gray-100 hover:bg-gray-200 border border-gray-300 text-xs text-center text-black font-bold px-6 rounded-sm uppercase transition duration-200" name="hardware">
          <option value="" disabled selected>Choose Hardware</option>
          {% for i in single_product.variation_set.hardwares %}
          <option value="{{ i.variation_value }}">{{ i.variation_value }}</option>
          {% endfor %}
          </select>
          <select class="w-full block  py-4 bg-gray-100 hover:bg-gray-200 border border-gray-300 text-xs text-center text-black font-bold  px-8 rounded-sm uppercase transition duration-200" name="strap">
          <option value="" disabled selected>Choose Strap</option>
          {% for i in single_product.variation_set.straps %}
          <option value="{{ i.variation_value }}">{{ i.variation_value }}</option>
          {% endfor %}
          </select>
          <button type="submit" class="flex justify-center items-center w-full bg-gray-900 hover:bg-gray-800 text-center text-white font-bold  py-4 px-8 rounded-sm uppercase transition duration-200">
          <p class="px-2 text-xs">Add to cart</p>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
          </button>
        </div>
       


 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet" />
    

 <div class="grid place-items-center">
     <div class="w-full mx-auto mb-24">
     <div class="bg-white  shadow-sm">
         <!-- Dimensions-->
         <div class="transition hover:bg-gray-100">
         <!-- header -->
         <div class="accordion-header cursor-pointer transition flex space-x-5 px-5 items-center h-16">
          <svg class="w-7 h-7"version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewBox="0 0 422.777 422.777" style="enable-background:new 0 0 422.777 422.777;" xml:space="preserve">
       <g>
         <g>
           <path d="M416.628,82.068l-75.84-75.84c-8.226-8.198-21.534-8.198-29.76,0l-83.56,83.16l-20.96,20.96l-20.88,21.04l-104.8,104.8
             l-20.96,20.96l-53.72,53.64c-8.198,8.226-8.198,21.534,0,29.76l76,76c8.226,8.198,21.534,8.198,29.76,0l304.72-304.72
             C424.826,103.602,424.826,90.295,416.628,82.068z M409.668,104.868l-304.72,304.72c-4.351,4.125-11.169,4.125-15.52,0l-76-76
             c-4.272-4.292-4.272-11.228,0-15.52l50.04-50.32l39.12,39.12c1.875,2.057,5.063,2.205,7.12,0.33
             c2.057-1.875,2.205-5.063,0.33-7.12c-0.105-0.115-0.215-0.225-0.33-0.33l-39.12-39.12l13.84-13.84l17.76,17.76
             c1.875,2.057,5.063,2.205,7.12,0.33c2.057-1.875,2.205-5.063,0.33-7.12c-0.105-0.115-0.215-0.225-0.33-0.33l-17.84-17.76
             l13.84-13.84l17.76,17.76c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-17.76-17.76l13.84-13.84
             l39.12,39.12c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-39.12-39.12l13.84-13.84l17.76,17.76
             c1.875,2.057,5.063,2.205,7.12,0.33s2.205-5.063,0.33-7.12c-0.105-0.115-0.215-0.225-0.33-0.33l-17.76-17.76l13.84-13.84
             l17.76,17.76c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-17.6-17.76l13.84-13.84l39.12,39.12
             c2.192,1.716,5.359,1.33,7.075-0.862c1.442-1.842,1.427-4.433-0.035-6.258l-39.2-39.12l13.84-13.84l17.76,17.76
             c1.875,2.057,5.063,2.205,7.12,0.33c2.057-1.875,2.205-5.063,0.33-7.12c-0.105-0.115-0.215-0.225-0.33-0.33l-17.76-17.76
             l13.84-13.84l17.76,17.76c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-17.76-17.76l13.84-13.84
             l39.12,39.12c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-39.12-39.12l13.84-13.84l17.76,17.76
             c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-17.76-17.76l13.84-13.84l39.12,39.12
             c2.057,1.875,5.245,1.727,7.12-0.33c1.753-1.924,1.753-4.866,0-6.79l-39.12-39.12l16.88-16.88c4.351-4.125,11.169-4.125,15.52,0
             l76,76c4.272,4.292,4.272,11.228,0,15.52L409.668,104.868z"/>
         </g>
       </g>
       <g>
         <g>
           <path d="M91.498,331.418c-0.01-0.01-0.02-0.02-0.03-0.03c-9.613-9.565-25.147-9.565-34.76,0c-9.615,9.599-9.628,25.175-0.03,34.79
             c9.599,9.615,25.175,9.628,34.79,0.03C101.084,356.609,101.097,341.033,91.498,331.418z M84.428,358.988l-0.04,0.08
             c-5.677,5.695-14.896,5.708-20.591,0.031c-5.695-5.677-5.708-14.896-0.031-20.591s14.896-5.708,20.591-0.031
             c0.01,0.01,0.021,0.021,0.031,0.031C90.012,344.171,90.03,353.304,84.428,358.988z"/>
         </g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       <g>
       </g>
       </svg>
             <h3>Dimensions</h3>
         </div>
         <!-- Content -->
         <div class="accordion-content px-5 pb-1 overflow-hidden max-h-0">
             <p class="leading-6 font-light pl-9 text-justify">
              {{ single_product.dimensions|linebreaks }}

             </p>
          </div>
         </div>
 
         <!-- Shipping -->
         <div class="transition hover:bg-gray-100">
         <!-- header -->
         <div class="accordion-header cursor-pointer transition flex space-x-5 px-5 items-center h-16">
          <svg class="h-7 w-7" enable-background="new 0 0 24 24"  viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg"><path d="m6.5 19h-2c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h2c.276 0 .5.224.5.5s-.224.5-.5.5z"/><path d="m22.75 19h-1.25c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h.835l.674-3.592c-.009-1.838-1.579-3.408-3.509-3.408h-3.283l-1.591 7h2.874c.276 0 .5.224.5.5s-.224.5-.5.5h-3.5c-.152 0-.296-.069-.391-.188-.095-.118-.131-.274-.097-.422l1.818-8c.052-.229.254-.39.488-.39h3.682c2.481 0 4.5 2.019 4.5 4.5l-.759 4.092c-.044.237-.25.408-.491.408z"/><path d="m19.5 21c-1.378 0-2.5-1.121-2.5-2.5s1.122-2.5 2.5-2.5 2.5 1.121 2.5 2.5-1.122 2.5-2.5 2.5zm0-4c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5 1.5-.673 1.5-1.5-.673-1.5-1.5-1.5z"/><path d="m8.5 21c-1.378 0-2.5-1.121-2.5-2.5s1.122-2.5 2.5-2.5 2.5 1.121 2.5 2.5-1.122 2.5-2.5 2.5zm0-4c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5 1.5-.673 1.5-1.5-.673-1.5-1.5-1.5z"/><path d="m6.5 10h-4c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5z"/><path d="m6.5 13h-5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h5c.276 0 .5.224.5.5s-.224.5-.5.5z"/><path d="m6.5 16h-6c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h6c.276 0 .5.224.5.5s-.224.5-.5.5z"/><path d="m14 19h-3.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h3.101l2.272-10h-11.373c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h12c.152 0 .296.069.391.188.095.118.131.274.097.422l-2.5 11c-.052.229-.255.39-.488.39z"/></svg>
             <h3>Shipping</h3>
         </div>
         <!-- Content -->
         <div class="accordion-content px-5 pb-1 overflow-hidden max-h-0">
             <p class="leading-6 font-light pl-9 text-justify">
              {{ single_product.shipping_rules|linebreaks }}

             </p>
          </div>
         </div>
 
         <!-- Contact -->
         <div class="transition hover:bg-gray-100">
         <!-- header -->
         <div class="accordion-header cursor-pointer transition flex space-x-5 px-5 items-center h-16">
          <svg id="Layer_1" class="w-7 h-7" viewBox="0 0 256 256"  xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m200.676 228.054h-145.352a3 3 0 1 1 0-6h145.352a3 3 0 0 1 0 6z"/><path d="m180.643 256h-105.286a23.06 23.06 0 0 1 -23.033-23.034v-209.932a23.06 23.06 0 0 1 23.033-23.034h105.286a23.06 23.06 0 0 1 23.033 23.034v209.932a23.06 23.06 0 0 1 -23.033 23.034zm-105.286-250a17.053 17.053 0 0 0 -17.033 17.034v209.932a17.053 17.053 0 0 0 17.033 17.034h105.286a17.053 17.053 0 0 0 17.033-17.034v-209.932a17.053 17.053 0 0 0 -17.033-17.034z"/><path d="m200.676 33.946h-145.352a3 3 0 0 1 0-6h145.352a3 3 0 1 1 0 6z"/><path d="m139.949 242.167h-23.9a3 3 0 0 1 0-6h23.9a3 3 0 0 1 0 6z"/></svg> 
                      <h3>Contact</h3>
         </div>
         <!-- Content -->
         <div class="accordion-content px-5 pb-1 overflow-hidden max-h-0">
             <p class="leading-6 font-light pl-9 text-justify">
              {{ single_product.contact_info|linebreaks }}

             </p>
          </div>
         </div>
 
      
     </div>
     </div>
 </div>
 
 <style>
     .accordion-content {
     transition: max-height 0.3s ease-out, padding 0.3s ease;
     }
 </style>
 
 <script>
     const accordionHeader = document.querySelectorAll(".accordion-header");
     accordionHeader.forEach((header) => {
     header.addEventListener("click", function () {
         const accordionContent = header.parentElement.querySelector(".accordion-content");
         let accordionMaxHeight = accordionContent.style.maxHeight;
 
         // Condition handling
         if (accordionMaxHeight == "0px" || accordionMaxHeight.length == 0) {
         accordionContent.style.maxHeight = `${accordionContent.scrollHeight + 32}px`;
         header.querySelector(".fas").classList.remove("fa-plus");
         header.querySelector(".fas").classList.add("fa-minus");
         header.parentElement.classList.add("bg-indigo-50");
         } else {
         accordionContent.style.maxHeight = `0px`;
         header.querySelector(".fas").classList.add("fa-plus");
         header.querySelector(".fas").classList.remove("fa-minus");
         header.parentElement.classList.remove("bg-indigo-50");
         }
     });
     });
 </script>


        {% endif %}
        </form>
    </div>
</div>

 
</section>

<script>

$(window).scroll(() => { 
   var winWidth = $(window).width();
   if(winWidth>640 && winWidth <= 1024) {
     var h=1300;
// Distance from top of document to top of footer.
topOfFooter = $('#footer').position().top;
// Distance from top of document to top of cart.
topOfCart = $('#cart').position().top;
// Distance user has scrolled from top, adjusted to take in height of sidebar (570 pixels inc. padding).
scrollDistanceFromTopOfDoc = $(document).scrollTop() + h;
// Difference between the two.
scrollDistanceFromTopOfFooter = scrollDistanceFromTopOfDoc - topOfFooter;

// If user has scrolled further than footer,
// pull sidebar up using a negative margin.
if (scrollDistanceFromTopOfDoc > topOfFooter) {
  $('#cart').css('margin-top', 0 - scrollDistanceFromTopOfFooter);
} else  {
  $('#cart').css('margin-top', 0);
}
}
else if (winWidth >1024){
     var h=1200;
// Distance from top of document to top of footer.
topOfFooter = $('#footer').position().top;
// Distance from top of document to top of cart.
topOfCart = $('#cart').position().top;
// Distance user has scrolled from top, adjusted to take in height of sidebar (570 pixels inc. padding).
scrollDistanceFromTopOfDoc = $(document).scrollTop() + h;
// Difference between the two.
scrollDistanceFromTopOfFooter = scrollDistanceFromTopOfDoc - topOfFooter;

// If user has scrolled further than footer,
// pull sidebar up using a negative margin.
if (scrollDistanceFromTopOfDoc > topOfFooter) {
  $('#cart').css('margin-top', 0 - scrollDistanceFromTopOfFooter);
} else  {
  $('#cart').css('margin-top', 0);
}
}


});


</script>

{% endblock %}
